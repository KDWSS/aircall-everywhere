<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="demo.css">
</head>


<body>
  <div id="phone-container" class="d-none">
    <div class="arrow-up"></div>
    <div id="phone"></div>
  </div>

  <nav>
    <div class="nav-content">
      <a href="https://aircall.io" id="link-aircall">
        <img src="images/aircall-logo.svg">
      </a>
      <a href="#">About</a>
      <a href="https://aircall.github.io/aircall-everywhere/tests/">Code coverage</a>
    </div>

    <div class="nav-content">
      <a href="https://github.com/aircall/aircall-everywhere">
        Github
      </a>

      <a id="phone-aircall" class="d-none">
        <img src="images/aircall-icon.svg">
      </a>
    </div>
  </nav>

  <main role="main">
    <div class="jumbotron">
      <h1>Aircall Everywhere</h1>
      <p>Aircall Everywhere purpose is to let you embed Aircall phone into your website and interacts with it. If
        your are building your custom CRM and want your users to use Aircall directly in it, you're in the right
        place!</p>
    </div>


    <div class="container">
      <div class="dark-box"></div>
      <h2 id="installation">Installation</h2>

      <div class="row">
        <div class="left">
          <p>You just have to add this repository in your project, and then import the library in your code.<br>See the
            demo on how to use the library.</p>
        </div>
        <div class="right">
          <pre class="prettyprint"><code>npm install aircall-everywhere

import AircallPhone from 'aircall-everywhere'</code></pre>
        </div>
      </div>


      <h2 id="demo">Demo</h2>

      <div class="row">
        <div class="left bg-grey">
          <h3>Load Aircall phone</h3>
          <p>Click on the button to load the Aircall phone. You will be able to toggle it via the phone icon in the
            header.<br>Informations about the user logged in are retrieved on load.<br><br></p>

          <button class="button" id="load-phone-button">Load phone</button>
          <br><br>
          <pre class="prettyprint"><code id="user-info">//user informations</code></pre>

          <div class="alert alert-danger" id="phone-loading">
            Phone is not loaded or logged in
          </div>
        </div>
        <div class="right">
          <pre class="prettyprint"><code>const ap = new AircallPhone({
  domToLoadPhone: '#phone',
  onLogin: settings => {
    setStatusData('#user-info', settings, '//user informations');
    setStatusMessage('#phone-loading', 'success', 'Phone is loaded and ready to use!');
  },
  onLogout: () => {
    setStatusData('#user-info', '', '//user informations');
    setStatusMessage('#phone-loading', 'danger', 'Phone is not loaded or logged in');
  }
});</code></pre>
        </div>
      </div>

      <div class="row">
        <div class="left bg-grey">
          <h3>Call events</h3>
          <p>There are multiple events happening during the lifecycle of a phone call. Try making an outgoing or ingoing call to see what happens!</p>
          <br><br>
          <div class="d-flex">
            <pre class="prettyprint"><code id="call-info">call informations...</code></pre>
            <pre id="call-info-logs">logging started</pre>
          </div>
          
          <div class="alert alert-warning" id="call-events">
            Not in a call
          </div>
        </div>
        <div class="right">
          <pre class="prettyprint"><code>ap.on('incoming_call', callInfos => {
  setPhoneVisibility(true);
  setStatusData('#call-info', callInfos, '// Incoming call');
  const message = 'Incoming call from ' + callInfos.from + ' to ' + callInfos.to + ' ringing!';
  addLogLine('#call-info-logs', message);
  setStatusMessage('#call-events', 'success', message);
});

ap.on('call_end_ringtone', callInfos => {
  setStatusData('#call-info', callInfos, '// Ringing ended');
  const message = 'Ringing ended. call was ' + callInfos.answer_status;
  addLogLine('#call-info-logs', message);
  setStatusMessage('#call-events', callInfos.answer_status === 'answered' ? 'success' : 'warning' , message);
});

ap.on('call_ended', callInfos => {
  setStatusData('#call-info', callInfos, '// Call ended');
  const message = 'Call ended. Lasted ' + callInfos.duration + ' seconds';
  addLogLine('#call-info-logs', message);
  setStatusMessage('#call-events', 'warning', message);
});

ap.on('comment_saved', callInfos => {
  setStatusData('#call-info', callInfos, '// Comment on call');
  const message = 'Comment about the last call saved';
  addLogLine('#call-info-logs', message);
  setStatusMessage('#call-events', 'success', message);
});

ap.on('outgoing_call', callInfos => {
  setStatusData('#call-info', callInfos, '// Outgoing call');
  const message = 'Outgoing call from ' + callInfos.from + ' to ' + callInfos.to + '...';
  addLogLine('#call-info-logs', message);
  setStatusMessage('#call-events', 'success', message);
});

ap.on('outgoing_answered', callInfos => {
  setStatusData('#call-info', callInfos, '// Outgoing call');
  const message = 'Outgoing call answered!';
  addLogLine('#call-info-logs', message);
  setStatusMessage('#call-events', 'success', message);
});</code></pre>
        </div>
      </div>
      <h3>Send events to the phone</h3>
      <div class="row">
        <div class="left">
          <button type="button" class="btn btn-primary mb-2" id="is-login-button">Is Phone logged in?</button>
          <div class="alert alert-success d-none" role="alert" id="is-logged-in">
            Logged in
          </div>
          <div class="alert alert-danger d-none" role="alert" id="is-logged-out">
            Logged out
          </div>
        </div>
        <div class="right">
          <pre class="prettyprint"><code>isLoginButton.addEventListener(
  'click',
  () => {
    ap.isLoggedIn(res => {
      res
        ? isLoggedInAlert.classList.remove('d-none')
        : isLoggedOutAlert.classList.remove('d-none');
      setTimeout(() => {
        isLoggedInAlert.classList.add('d-none');
        isLoggedOutAlert.classList.add('d-none');
      }, 2000);
    });
  },
  false
);</code></pre>
        </div>
      </div>

      <div class="row">
        <div class="left">
          <button type="button" class="btn btn-primary mb-2" id="dial-button">Dial +33 1 23 45 67 89</button>
          <div class="alert alert-success d-none" role="alert" id="dial-number-success">
            Success!
          </div>
          <div class="alert alert-danger d-none" role="alert" id="dial-number-error">
            Error:
          </div>
        </div>
        <div class="right">
          <pre class="prettyprint"><code>dialButton.addEventListener(
  'click',
  () => {
    ap.send('dial_number', { phone_number: '+33123456789' }, (success, data) => {
      if (success) {
        dialSuccessAlert.classList.remove('d-none');
      } else {
        dialErrorAlert.textContent = 'Error : ' + data.message;
        dialErrorAlert.classList.remove('d-none');
      }

      setTimeout(() => {
        dialSuccessAlert.classList.add('d-none');
        dialErrorAlert.classList.add('d-none');
      }, 2000);
    });
  },
  false
);</code></pre>
        </div>
      </div>
      <p>Do you need more info? Read our documentation on <a href="https://github.com/aircall/aircall-everywhere">Github</a>
    </div>
  </main>

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sunburst"></script>
</body>

</html>